/* ===== 기본 ===== */
:root{
  --bg:#f3f6fb;
  --panel:#ffffff;
  --ink:#0b1320;
  --ink-sub:#64748b;
  --line:#e6eef6;
  --brand:#5b7bff;
  --brand-ink:#465fe8;
  --shadow:0 10px 30px rgba(15,23,42,.08);
  --radius-lg:14px;
  --gap:12px;

  /* 행 높이/여백 컨트롤 */
  --row-h:124px;
  --row-pad:14px;

  /* 재생 버튼 관련 변수 */
  --play-size:36px;
  --play-gap:10px;

  /* 미니카드 하단 여유(버튼 공간 포함) */
  --mini-bottom: calc(var(--play-size) + var(--play-gap) + 6px);
}
.mini-card{ min-height: var(--mini-h) !important; }

body.roadmap-page{
  font-family:'Noto Sans KR',system-ui,sans-serif;
  margin:0; background:var(--bg); color:#111827;
}
a{color:inherit; text-decoration:none}
img{max-width:100%; display:block}

/* 스크린리더용 유틸 */
.visually-hidden{
  position:absolute!important; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}

/* ===== 컨테이너 ===== */
.container{max-width:1040px; margin:0 auto; padding:20px 18px 64px}

/* ===== 상단 탑바 ===== */
.topbar{display:flex; justify-content:flex-end; align-items:center; margin:8px 0 10px}

/* 공통 검색 래퍼 + 인풋 */
.search, .sub-search{
  display:flex; align-items:center; background:#fff; border:1.5px solid #cfd8e3;
}
.search input, .sub-search input{
  border:0; outline:none; padding:10px 12px; font-size:14px; background:transparent;
}
.search input::placeholder, .sub-search input::placeholder{ color:#97a3b6 }

/* 탑바 검색(텍스트 버튼) */
.search{ border-radius:10px; overflow:hidden }
.search button{
  background:var(--brand); color:#fff; font-size:14px; font-weight:800;
  border:0; padding:10px 14px; cursor:pointer; transition:background .2s ease;
}
.search button:hover{ background:var(--brand-ink) }

/* ===== 서브헤더(탭+검색) ===== */
/* ⬇︎ 탭이 항상 위에 오도록 z-index 조정 */
.subhead{
  background:#fff; border:1.5px solid var(--line); border-radius:12px;
  box-shadow:var(--shadow); margin:6px 0 18px;
  position:relative; z-index:10;
}
.subhead-inner{ 
  display:flex; align-items:center; justify-content:space-between; gap:14px; padding:10px 12px;
  position:relative; z-index:10; /* 내부도 함께 상승 */
}
.sub-tabs{ 
  display:flex; align-items:center; gap:6px; flex-wrap:wrap;
  position:relative; z-index:20;  /* 탭 최상단 */
}
.subtab{
  display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:10px;
  font-size:14px; font-weight:800; letter-spacing:-.2px; color:var(--ink);
  border:1.5px solid transparent; position:relative;
  transition:background .18s ease, border-color .18s ease, color .18s ease, transform .12s ease;
}
.subtab:hover{ background:#f5f7ff; border-color:#d8e1f0 }
.subtab[aria-current="page"], .subtab.is-active{ background:#eef3ff; border-color:#cfd8e3; color:var(--brand-ink) }
.subtab[aria-current="page"]::after, .subtab.is-active::after{
  content:""; position:absolute; left:10px; right:10px; bottom:6px; height:3px; border-radius:3px; background:var(--brand);
}

/* 서브헤더 검색(아이콘 버튼, 알약) */
/* ⬇︎ 검색 래퍼는 탭보다 아래로, 장식은 클릭 통과 */
.sub-search{
  gap:6px; border-radius:999px; padding:6px 10px 6px 14px;
  box-shadow:inset 0 0 0 1px rgba(15,23,42,.02);
  transition:border-color .18s ease, box-shadow .18s ease; max-width:560px;
  position:relative; z-index:1;
}
.sub-search::before,
.sub-search::after{ pointer-events:none; }
.sub-search:focus-within{
  border-color:var(--brand);
  box-shadow:0 8px 20px rgba(91,123,255,.15), inset 0 0 0 1px rgba(15,23,42,.02);
}
.sub-search input{ padding:10px 6px; min-width:120px }
.sub-search .icon-btn{
  border:0; background:transparent; width:36px; height:36px; border-radius:999px;
  display:flex; align-items:center; justify-content:center; cursor:pointer;
  transition:background .18s ease, transform .12s ease;
}
.sub-search .icon-btn:hover{ background:rgba(91,123,255,.10); transform:translateY(-1px) }
.sub-search .icon-btn svg{ fill:var(--brand) }

/* ===== 카테고리 ===== */
.category-nav{ display:flex; justify-content:center; gap:14px; margin:18px 0 26px; flex-wrap:wrap }
.category-nav .cat{
  display:flex; flex-direction:column; align-items:center; gap:6px; min-width:74px;
  padding:10px 14px; background:#fff; border:1.5px solid #dbe3ee; border-radius:12px;
  cursor:pointer; font-size:13px; font-weight:800; transition:all .18s ease; box-shadow:0 2px 0 rgba(15,23,42,.02);
}
.category-nav .cat img{ width:28px; height:28px; transition:filter .18s ease }
.category-nav .cat:hover{ background:#f1f5ff; border-color:var(--brand) }
.category-nav .cat.is-active{ background:var(--brand); border-color:var(--brand-ink); color:#fff; box-shadow:0 6px 16px rgba(91,123,255,.35) }
.category-nav .cat.is-active img{ filter:brightness(0) invert(1) }

/* ===== 섹션 헤드 ===== */
.section-head{ display:flex; justify-content:space-between; align-items:center; margin:8px 2px 16px }
.section-head h2{ font-size:22px; font-weight:900; letter-spacing:-.2px; color:var(--ink) }
.section-head .more{ font-size:13px; color:#2563eb }

/* ===== 그룹 박스 (행 높이 변수 적용) ===== */
.roadmap-group{
  position:relative; overflow:visible; background:#f9fbff; border:1px solid var(--line);
  border-radius:var(--radius-lg); padding:var(--row-pad); box-shadow:var(--shadow);
  display:grid; grid-template-columns:1.2fr 1.6fr; gap:var(--gap); margin-bottom:18px;
}

/* ===== 좌측 큰 카드 ===== */
.course-main{
  display:grid; grid-template-columns:180px 1fr auto; align-items:center; gap:16px;
  background:#fff; border:1px solid #e5e7eb; border-radius:12px;
  padding:var(--row-pad); min-height:var(--row-h);
}
.course-main .thumb{
  width:180px;
  height:calc(var(--row-h) - (2 * var(--row-pad)));
  border-radius:10px; overflow:hidden;
}
.course-main .thumb img{ width:100%; height:100%; object-fit:cover }
.course-main .body{ min-width:0; text-align:left }
.course-main .title{ font-size:18px; font-weight:900; letter-spacing:-.2px; margin:2px 0 6px; color:var(--ink) }
.course-main .desc{ font-size:14px; color:#64748b; margin:0 0 10px; line-height:1.5 }
.course-main .meta-row{ display:flex; align-items:center; gap:8px }
.meta-link{ font-size:13px; color:#2563eb; font-weight:800 }
.course-main .dot{ color:#94a3b8 }
.play-circle{
  width:40px; height:40px; border-radius:50%; border:none; background:var(--brand); color:#fff; font-weight:900;
  display:inline-flex; align-items:center; justify-content:center; box-shadow:0 2px 8px rgba(91,123,255,.35);
  cursor:pointer; transition:transform .12s ease, background .18s ease;
}
.play-circle:hover{ transform:translateY(-1px); background:var(--brand-ink) }
.play-circle.sm{ position:absolute; right:12px; bottom:12px; width:36px; height:36px }

/* ===== 우측 미니카드 트랙 ===== */
.course-minis{ position:relative; overflow:visible }
.course-minis::before,.course-minis::after{
  content:""; position:absolute; top:0; bottom:0; width:32px; pointer-events:none; z-index:5;
}
.course-minis::before{ left:0; background:linear-gradient(90deg,#f9fbff 0%,rgba(249,251,255,0) 100%) }
.course-minis::after{ right:0; background:linear-gradient(270deg,#f9fbff 0%,rgba(249,251,255,0) 100%) }
.course-minis .track{
  display:flex; gap:var(--gap); overflow:hidden; scroll-behavior:smooth; padding:2px;
}

/* ===== 미니카드 & 재생 버튼 (우하단 고정) ===== */
.mini-card{
  flex:0 0 calc((100% - 2 * var(--gap)) / 3);
  background:#fff; border:1px solid #e5e7eb; border-radius:12px;
  min-height:var(--row-h);
  padding:var(--row-pad) var(--row-pad) calc(var(--row-pad) + var(--mini-bottom));
  position:relative; text-align:left;
  transition:transform .12s ease, box-shadow .18s ease, border-color .18s ease;
}
.mini-card:hover{ transform:translateY(-2px); box-shadow:0 10px 24px rgba(15,23,42,.08); border-color:#dbe3ee }
.mini-card .chips{ display:inline-flex; gap:6px; margin-bottom:8px; flex-wrap:wrap }
.chip{ display:inline-block; padding:3px 8px; border-radius:999px; font-size:12px; font-weight:900; color:#3730a3; background:#eef2ff }
.chip.ghost{ background:#e9efff; color:#4c56b8 }
.mini-title{ font-size:16px; font-weight:900; color:var(--ink); margin:2px 0 0 }

/* 기본 우하단 배치 */
.mini-card .mini-play{
  position:absolute;
  right:var(--play-gap);
  bottom:var(--play-gap);
  width:var(--play-size);
  height:var(--play-size);
  border-radius:50%;
  border:0; background:var(--brand); color:#fff;
  display:flex; align-items:center; justify-content:center;
  box-shadow:0 8px 18px rgba(91,123,255,.25), 0 0 0 3px #fff;
  cursor:pointer;
  transition:transform .12s ease, background .18s ease, box-shadow .18s ease;
}
.mini-card .mini-play svg{ fill:#fff }
.mini-card .mini-play:hover{
  background:var(--brand-ink);
  transform:translateY(-1px) scale(1.04);
  box-shadow:0 10px 22px rgba(91,123,255,.30), 0 0 0 3px #fff;
}
.mini-card .mini-play:active{ transform:translateY(0) scale(.98) }

/* 인라인/이전 규칙이 top 고정해도 강제 우하단 */
.roadmap-page .course-minis .track .mini-card .mini-play{
  top:auto !important;
  bottom:var(--play-gap) !important;
  right:var(--play-gap) !important;
}

/* 내비 버튼 */
.course-minis .nav{
  position:absolute; top:50%; transform:translateY(-50%);
  width:34px; height:34px; border-radius:50%; border:1px solid #ced8ee; background:#fff;
  color:var(--brand); font-weight:900; display:grid; place-items:center; cursor:pointer; z-index:10;
  box-shadow:0 6px 16px rgba(15,23,42,.18), 0 0 0 3px #fff;
  transition:background .18s ease, color .18s ease, transform .12s ease, opacity .18s ease;
}
.course-minis .nav:hover{ background:#eef3ff; color:var(--brand-ink); transform:translateY(-50%) scale(1.05) }
.course-minis .nav.disabled{ opacity:.35; pointer-events:none }
.course-minis .prev{ left:-16px }
.course-minis .next{ right:-16px }

/* ===== 반응형 ===== */
@media (max-width:980px){
  .roadmap-group{ grid-template-columns:1fr }
  .subhead-inner{ flex-wrap:wrap }
  .sub-search{ order:2; width:100% }
}
@media (max-width:760px){
  .course-main{ grid-template-columns:140px 1fr auto }
  .course-main .thumb{ width:140px }
  .mini-card{ flex-basis:calc((100% - var(--gap))/2) }
  .course-minis .prev{ left:-8px }
  .course-minis .next{ right:-8px }
  .sub-search input{ min-width:0 }
}
@media (max-width:520px){
  .mini-card{ flex-basis:100% }
  .course-minis .prev{ left:-4px }
  .course-minis .next{ right:-4px }
  .sub-search input{ width:100% }
}
